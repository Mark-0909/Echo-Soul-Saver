[gd_scene load_steps=2 format=3 uid="uid://bnnw53trx53oy"]

[sub_resource type="GDScript" id="GDScript_j7d8g"]
script/source = "extends Node2D

@onready var animated_sprite_2d: AnimatedSprite2D = $AnimatedSprite2D

const SPEED: int = 300
var moving: bool = true  

@export var is_player_bullet: bool = true
@export var is_ghost_bullet: bool = true

func _process(delta: float) -> void:
	if moving:
		position += transform.x * SPEED * delta  

func _on_body_entered(body: Node2D) -> void:
	if not moving:
		return  # Already hit something, ignore further collisions

	# Ignore hitting yourself
	if body.is_in_group(\"Player\") and is_player_bullet:
		return

	# Ghost bullets behavior
	if is_ghost_bullet:
		if body.is_in_group(\"Physical\") and body.is_in_group(\"Enemy\") and is_player_bullet:
			print(\"Ghost bullet ignored physical enemy\")
			return
		if body.is_in_group(\"Ghost\") and body.is_in_group(\"Enemy\") and is_player_bullet:
			if body.has_method(\"LoseLife\"):
				body.LoseLife()
			else:
				print(\"Ghost enemy hit but no LoseLife method\")
			# Continue to destroy bullet after hit
	else:
		# Normal bullet behavior (not ghost bullet)
		if body.is_in_group(\"Enemy\") and is_player_bullet:
			if body.has_method(\"LoseLife\"):
				body.LoseLife()

	# Handle bullet impact visuals
	moving = false
	set_process(false)
	animated_sprite_2d.play(\"splash\")
	await get_tree().create_timer(0.1).timeout
	queue_free()
"

[node name="EnemyGun" type="Node2D"]
script = SubResource("GDScript_j7d8g")

[node name="Marker2D" type="Marker2D" parent="."]
position = Vector2(86, 0)

[node name="ShootTimer" type="Timer" parent="."]
wait_time = 2.0
